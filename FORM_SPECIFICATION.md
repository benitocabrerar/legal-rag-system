# Legal Document Upload Form - Complete Specification

## Visual Form Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Subir Documento Legal                         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Tipo de Norma *                                           â”‚ â”‚
â”‚  â”‚ â–¼ Ley Ordinaria                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ TÃ­tulo de la Norma *                                      â”‚ â”‚
â”‚  â”‚ Ej: CÃ³digo Civil y Comercial de la NaciÃ³n                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ JerarquÃ­a Legal *                                         â”‚ â”‚
â”‚  â”‚ â–¼ Leyes Ordinarias                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Tipo de PublicaciÃ³n RO      â”‚ NÃºmero de PublicaciÃ³n RO     â”‚ â”‚
â”‚  â”‚ â–¼ Ordinario                â”‚ Ej: 490                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Fecha de PublicaciÃ³n        â”‚ Estado                       â”‚ â”‚
â”‚  â”‚ ğŸ“… YYYY-MM-DD              â”‚ â–¼ Original                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  [Conditional: Only if Estado = "Reformado"]                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Fecha de Ãšltima Reforma *                                 â”‚ â”‚
â”‚  â”‚ ğŸ“… YYYY-MM-DD                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Archivo PDF *                                             â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚          ğŸ“¤ Click para seleccionar archivo PDF      â”‚   â”‚ â”‚
â”‚  â”‚ â”‚                                                     â”‚   â”‚ â”‚
â”‚  â”‚ â”‚          [Selected: documento.pdf (2.5 MB)]        â”‚   â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â„¹ï¸  Procesamiento AutomÃ¡tico                              â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚ El documento serÃ¡ procesado automÃ¡ticamente para         â”‚ â”‚
â”‚  â”‚ generar embeddings vectoriales y estarÃ¡ disponible       â”‚ â”‚
â”‚  â”‚ inmediatamente para consultas en el sistema RAG.         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  [Upload Progress - Shows when uploading]                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Subiendo y procesando documento...                60%    â”‚ â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚    Cancelar      â”‚  â”‚  ğŸ“¤ Subir Documento Legal        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Field Specifications

### 1. Tipo de Norma (Required)
**Type:** Dropdown (Select)
**Options:** 14 values
**Default:** ORDINARY_LAW

| Value | Label (Spanish) |
|-------|----------------|
| CONSTITUTIONAL_NORM | Norma Constitucional |
| ORGANIC_LAW | Ley OrgÃ¡nica |
| ORDINARY_LAW | Ley Ordinaria |
| ORGANIC_CODE | CÃ³digo OrgÃ¡nico |
| ORDINARY_CODE | CÃ³digo Ordinario |
| REGULATION_GENERAL | Reglamento General |
| REGULATION_EXECUTIVE | Decreto Ejecutivo |
| ORDINANCE_MUNICIPAL | Ordenanza Municipal |
| ORDINANCE_METROPOLITAN | Ordenanza Metropolitana |
| RESOLUTION_ADMINISTRATIVE | ResoluciÃ³n Administrativa |
| RESOLUTION_JUDICIAL | ResoluciÃ³n Judicial |
| ADMINISTRATIVE_AGREEMENT | Acuerdo Administrativo |
| INTERNATIONAL_TREATY | Tratado Internacional |
| JUDICIAL_PRECEDENT | Precedente Judicial |

### 2. TÃ­tulo de la Norma (Required)
**Type:** Text Input
**Validation:**
- Required
- Minimum 5 characters
- Maximum 500 characters

**Example:** "CÃ³digo Civil y Comercial de la NaciÃ³n"

### 3. JerarquÃ­a Legal (Required)
**Type:** Dropdown (Select)
**Options:** 10 values
**Default:** LEYES_ORDINARIAS

| Value | Label (Spanish) |
|-------|----------------|
| CONSTITUCION | ConstituciÃ³n |
| TRATADOS_INTERNACIONALES_DDHH | Tratados Internacionales de DDHH |
| LEYES_ORGANICAS | Leyes OrgÃ¡nicas |
| LEYES_ORDINARIAS | Leyes Ordinarias |
| CODIGOS_ORGANICOS | CÃ³digos OrgÃ¡nicos |
| CODIGOS_ORDINARIOS | CÃ³digos Ordinarios |
| REGLAMENTOS | Reglamentos |
| ORDENANZAS | Ordenanzas |
| RESOLUCIONES | Resoluciones |
| ACUERDOS_ADMINISTRATIVOS | Acuerdos Administrativos |

### 4. Tipo de PublicaciÃ³n Registro Oficial (Optional)
**Type:** Dropdown (Select)
**Options:** 5 values
**Default:** ORDINARIO

| Value | Label (Spanish) |
|-------|----------------|
| ORDINARIO | Ordinario |
| SUPLEMENTO | Suplemento |
| SEGUNDO_SUPLEMENTO | Segundo Suplemento |
| SUPLEMENTO_ESPECIAL | Suplemento Especial |
| EDICION_CONSTITUCIONAL | EdiciÃ³n Constitucional |

### 5. NÃºmero de PublicaciÃ³n Registro Oficial (Optional)
**Type:** Text Input
**Validation:**
- Maximum 100 characters
- Alphanumeric

**Example:** "490" or "RO-490-S"

### 6. Fecha de PublicaciÃ³n (Optional)
**Type:** Date Picker
**Format:** YYYY-MM-DD
**Sent as:** ISO 8601 DateTime string

**Example:** "2015-08-01" â†’ "2015-08-01T00:00:00.000Z"

### 7. Estado (Required)
**Type:** Dropdown (Select)
**Options:** 2 values
**Default:** ORIGINAL

| Value | Label (Spanish) |
|-------|----------------|
| ORIGINAL | Original |
| REFORMADO | Reformado |

### 8. Fecha de Ãšltima Reforma (Conditional Required)
**Type:** Date Picker
**Format:** YYYY-MM-DD
**Required When:** Estado = "REFORMADO"
**Sent as:** ISO 8601 DateTime string

**Validation:**
- Required if Estado is REFORMADO
- Must be a valid date
- Should be after publication date (if provided)

### 9. Archivo PDF (Required)
**Type:** File Upload
**Accepted:** .pdf only
**Max Size:** 50 MB
**Processing:** File is read as text and sent in `content` field

**Validation:**
- Required
- Must be PDF file
- Size must be â‰¤ 50MB
- File must be readable

## Form Behavior

### Initial State
```typescript
{
  normType: 'ORDINARY_LAW',
  normTitle: '',
  legalHierarchy: 'LEYES_ORDINARIAS',
  publicationType: 'ORDINARIO',
  publicationNumber: '',
  publicationDate: '',
  lastReformDate: '',
  documentState: 'ORIGINAL',
  file: null
}
```

### Validation Triggers
1. **On Submit:** All validations run
2. **On Field Change:** Clear individual field error
3. **On File Select:** Validate file immediately

### Upload Flow
```
1. User clicks "Subir Documento Legal"
2. Form validation runs
3. If invalid â†’ Show errors, stop
4. If valid â†’ Continue
5. Set uploading = true
6. Progress: 0%
7. Read file as text
8. Progress: 30%
9. Prepare request body
10. Progress: 60%
11. Send POST request
12. Progress: 90%
13. Receive response
14. Progress: 100%
15. Show success message
16. Set uploading = false
17. Reset form or close modal
```

### Error Handling
```
1. Network Error
   â†’ "Error de conexiÃ³n con el servidor. Verifique su conexiÃ³n."

2. 401 Unauthorized
   â†’ Redirect to /login
   â†’ Clear localStorage

3. 403 Forbidden
   â†’ "Solo administradores pueden subir documentos legales"

4. 400 Validation Error
   â†’ Parse error details
   â†’ Show specific field errors

5. 500 Server Error
   â†’ "Error al procesar la solicitud"
   â†’ Show generic error message
```

## API Request Format

### Request
```http
POST /api/v2/legal-documents
Authorization: Bearer <token>
Content-Type: application/json

{
  "normType": "ORDINARY_LAW",
  "normTitle": "CÃ³digo Civil y Comercial",
  "legalHierarchy": "CODIGOS_ORDINARIOS",
  "content": "<entire PDF text content>",
  "publicationType": "ORDINARIO",
  "publicationNumber": "490",
  "publicationDate": "2015-08-01T00:00:00.000Z",
  "documentState": "REFORMADO",
  "lastReformDate": "2020-12-15T00:00:00.000Z"
}
```

### Success Response
```json
{
  "success": true,
  "document": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "normTitle": "CÃ³digo Civil y Comercial",
    "normType": "ORDINARY_LAW",
    "legalHierarchy": "CODIGOS_ORDINARIOS",
    "chunksCount": 234,
    "createdAt": "2025-11-09T23:00:00.000Z"
  }
}
```

### Error Response
```json
{
  "error": "Validation Error",
  "details": [
    {
      "path": ["normTitle"],
      "message": "TÃ­tulo debe tener al menos 5 caracteres"
    }
  ]
}
```

## UI States

### 1. Default State
- All fields editable
- Upload button enabled if file selected
- No errors shown

### 2. Uploading State
- All fields disabled
- Progress bar visible
- Upload button shows "Procesando..."
- Cancel button disabled

### 3. Success State
- Form hidden
- Success icon (checkmark) shown
- Success message displayed
- Options: "Subir Otro Documento" or "Cerrar"

### 4. Error State
- Form still editable
- Error banner at top
- Specific field errors shown
- User can fix and retry

## Responsive Design

### Desktop (â‰¥ 768px)
- Two-column layout for date/state fields
- Full-width other fields
- Modal width: max-w-3xl

### Mobile (< 768px)
- Single column layout
- All fields full width
- Modal takes full screen minus padding
- Scrollable content

## Accessibility

### ARIA Labels
```html
<input
  aria-label="TÃ­tulo de la norma"
  aria-required="true"
  aria-invalid={errors.normTitle ? "true" : "false"}
  aria-describedby={errors.normTitle ? "normTitle-error" : undefined}
/>
```

### Keyboard Navigation
- Tab through all fields
- Enter to submit form
- Escape to close modal
- Space to toggle dropdowns

### Screen Reader Announcements
- Error messages announced when they appear
- Success message announced
- Progress updates announced

## Performance Considerations

### Optimizations
1. File reading is async with progress tracking
2. Validation runs only when needed
3. API calls include proper timeouts
4. Form state managed efficiently with useState

### Bundle Size
- Component: ~23KB
- Dependencies: lucide-react icons
- No heavy external libraries

---

**Document Version:** 1.0.0
**Last Updated:** 2025-11-09
**Maintained By:** Development Team
